<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.springframework.org/schema/data/jaxb">
<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>

    <title>Bootstrap 3, from LayoutIt!</title>
    <!-- <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,900,200' rel='stylesheet' type='text/css'> -->
    <link href="https://fonts.googleapis.com/css?family=IM+Fell+English:400,400italic|Product+Sans" rel="stylesheet" type="text/css"/>

    <meta name="description" content="Source code generated using layoutit.com"/>
    <meta name="author" content="LayoutIt!"/>

    <link href="css/bootstrap.min.css" th:href="@{/resources/oc_css/bootstrap.min.css}" rel="stylesheet"/>
    <link href="css/style.css" th:href="@{/resources/oc_css/style.css}" rel="stylesheet"/>
    <link href='https://fonts.googleapis.com/css?family=Pacifico' rel='stylesheet' type='text/css'/>
    <link href="css/font-awesome.min.css" th:href="@{/resources/oc_css/font-awesome.min.css}" rel="stylesheet"/>
    <link href="css/bootstrap-social.css" th:href="@{/resources/oc_css/bootstrap-social.css}" rel="stylesheet"/>

</head>
<body>


<div class="container-fluid" style="padding-top: 0px;">
    <div class="row">
        <div class="col-md-12">
            <div th:replace="fragments/header :: header"></div>
            <!-- th:replace="fragments/header :: header(page='landing')" TODO use to put parameters in fragments
            http://stackoverflow.com/questions/22093149/thymeleaf-fragments-and-default-parameters -->
        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            <div class="row" style="background-color: white; border-bottom: 1px solid rgba(204, 204, 204, 0.57);">
                <div class="col-md-10 col-md-offset-1">
                    <div class="row" style="background-color: white;">


                        <div class="jumbotron home-search" style="">
                            <div class="container">
                                <div class="row">
                                    <div class="col-sm-12">
                                        <br/>
                                        <p class="main_description" style="font-size:30px;">Find the perfect place to party, eat or just have fun!</p>

                                        <br/><br/>
                                        <form action="#" th:action="@{/clients}" method="GET" id="search_form">
                                        <fieldset>
                                            <div class="row">
                                                <div class="col-sm-8 col-sm-offset-2" style="text-align: center">
                                                    <div class="row">

                                                        <div class="col-sm-10 col-sm-offset-1">
                                                            <div class="input-group">
                                                                <!--<span class="input-group-addon input-group-addon-text">Find me a</span>-->

                                                                <input onfocus="this.value='';" autocomplete="off" autofocus="autofocus" type="text" name="query" id="query_input" class="form-control col-sm-3" placeholder="e.g. restaurant Berlin or pizza"/>

                                                                <div id ="suggestionBox" style = "z-index:1; display:none; border: 1px solid rgb(226, 226, 226); background-color: #fff; border-radius: 2px; -webkit-box-shadow: 0 5px 10px rgba(0,0,0,.2); -moz-box-shadow: 0 5px 10px rgba(0,0,0,.2); box-shadow: 0 5px 10px rgba(0,0,0,.2);">
                                                                    <ul id="suggestionList" class="list-unstyled" style="width: 100%; display: table; margin-bottom:5px; text-align:left;">
                                                                        <!--<li style="margin: 4px; padding: 4px;"> <a href="..." style="padding:5px;" onclick="triggerSearch('teodor'); return false;">DEMO</a> </li>-->
                                                                    </ul>
                                                                </div>

                                                                <div id="removing_keeps_structure" class=" input-group-addon" style="border: 0px solid #ccc;">
                                                                </div>

                                                                <input onfocus="this.value='';" autocomplete="off" type="text" name="city" id="city_input" class="form-control col-sm-3" placeholder="&#xf041; Berlin" style="font-family:Arial, FontAwesome"/>

                                                                <div class=" input-group-addon">
                                                                    <div class="btn-group">
                                                                        <button type="button" class="btn  dropdown-toggle" data-toggle="dropdown" id="category_visible">
                                                                            All <span class="caret"></span>
                                                                        </button>
                                                                        <ul class="dropdown-menu" role="menu" name="category" >
                                                                            <li><a href="#" onclick="setCategoryValue('all')">All</a></li>
                                                                            <li><a href="#" onclick="setCategoryValue('bars')">Bars</a></li>
                                                                            <li><a href="#" onclick="setCategoryValue('restaurant')">Restaurant</a></li>
                                                                            <li><a href="#" onclick="setCategoryValue('pub')">Pub (Club)</a></li>
                                                                        </ul>
                                                                        <input type="text" name="category" class="form-control col-sm-3 hidden" id="category_hidden"/>
                                                                    </div>
                                                                </div>

                                                            </div>

                                                        </div>


                                                    </div>
                                                </div>
                                            </div>
                                            <br/>
                                            <br/>
                                            <div class="row">
                                                <div class="col-sm-12" style="text-align: center">
                                                    <!--href="listings.html" th:href="@{/clients(location=3,speciality=1)}"-->
                                                    <button type="submit" class="btn btn-primary search-btn">Search</button>
                                                </div>
                                            </div>
                                        </fieldset>
                                        </form>
                                        <br/>
                                        <br/>
                                        <div class="row">
                                            <div class="col-sm-12" style="text-align: center">

                                                <div id="quotes">
                                                    <!--<div class="text-item" style="display: none;">Boom! <strong>Vince</strong> just sold a <strong>Washing Machine</strong> in <strong>Sheffield</strong></div>-->
                                                    <!--<div class="text-item" style="display: none;"><strong>Julia</strong> is availiable for <strong>home cleaning</strong> in <strong>Manchester</strong></div>-->
                                                    <!--<div class="text-item" style="display: none;">Success! <strong>Paul</strong> has just sold a <strong>Mercedes-Benz E-class</strong> in <strong>Liverpool</strong></div>-->
                                                    <!--<div class="text-item" style="display: none;">Hey, <strong>Uber</strong> has a <strong>job opening</strong> in <strong>London</strong></div>-->
                                                </div>



                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>


                    </div>
                </div>
            </div>
        </div>
    </div>

    <p style="text-align: center; margin-top:50px; color: #999; line-height: normal; font-size: 17px;">
        Hand picked by <span style="font-family: 'Pacifico', cursive; font-weight: 400;">instant</span>, just for you!</p>

    <div th:replace="fragments/seo :: seo"></div>
    <div th:replace="fragments/footer :: footer"></div>

</div>



<script src="js/jquery.min.js" th:src="@{/resources/oc_js/jquery.min.js}"></script>
<script src="js/bootstrap.min.js" th:src="@{/resources/oc_js/bootstrap.min.js}"></script>
<script src="js/scripts.js" th:src="@{/resources/oc_js/scripts.js}"></script>
<script src="js/global.js" th:src="@{/resources/oc_js/global.js}"></script>

<script type="text/javascript" th:inline="javascript">
/*<![CDATA[*/

    //global
    var local_city;

    jQuery.ajax( {
      url: '//freegeoip.net/json/',
      type: 'POST',
      dataType: 'jsonp',
      success: function(location) {
        // example where I update content on the page.
        local_city = location.city;
        jQuery('#city_input').val(location.city);
        /*
        jQuery('#region-code').html(location.region_code);
        jQuery('#region-name').html(location.region_name);
        jQuery('#areacode').html(location.areacode);
        jQuery('#ip').html(location.ip);
        jQuery('#zipcode').html(location.zipcode);
        jQuery('#longitude').html(location.longitude);
        jQuery('#latitude').html(location.latitude);
        jQuery('#country-name').html(location.country_name);
        jQuery('#country-code').html(location.country_code);
        */
      }
    } );



    var suggestionClicked=false;
    $(function () {
      $('#category_hidden').val("all");
    });
/*
    $('#removing_keeps_structure').remove();
*/
    $(function () {
      $('#suggestionText').css({
            position: "absolute",
            top: ($('#query_input').offsetTop + $('#query_input').offsetHeight) + "px",
            left: $('#query_input').offsetLeft + "px"
        });
    });

    function setCategoryValue(data){
        $('#category_hidden').val(data);
        $('#category_visible').text(data);
    }

    function retrieveGuests() {
        var url = '/clients?query=' + $('#search_query').val();
        var data = $('#filterForm').serialize();
        url = url + '&view=2&' + data;
        $("#itemlist_results").load(url);
    }


    $( "#query_input" ).keyup(function() {

        $( "#suggestionList" ).empty();

        if($("#query_input").val().trim().length===0){
          $('#suggestionBox').hide();
          $( "#suggestionList" ).empty();
        }

        else{
            dynamic_width = $('#query_input').width() + 18;
            $('#suggestionBox').css({
                position: "absolute",
                top: (this.offsetTop + this.offsetHeight) + "px",
                left: this.offsetLeft + "px",
                width: dynamic_width + "px"
            });

            $.ajax({
              type: "GET",
              url: "/suggestions",
              data:
              {
                query: $('#query_input').val()
              },
              cache: false,
              success: function(data){
                for (var i = 0; i < data.venues.length; i++) {
                    $('#suggestionList').append( '<li style="margin: 4px; padding: 4px;"> <a href="javascript:void(0)" class="suggestionClickout" style="color: #999999; padding:5px;" onmousedown="triggerSearch(' + '&#39' + (data.venues[i].name).toString() + '&#39' +'); return false;"><i class="fa fa-coffee" style="color:#5e5e5e;"></i> ' + data.venues[i].name + '</a> </li>' );
                    //<hr/ style="margin: 0px; width: 95%; margin-left: 2.5%;">
                }
              }
            });

            $('#suggestionBox').show();
        }

    });

    function triggerSearch(data){
        suggestionClicked = true;
        $('#query_input').val(data);
        $('#search_form').trigger('submit');
    }

    function triggerSeoSearch(data){
        $('#query_input').val(data);
        $('#city_input').val(local_city);
        $('#category_hidden').val('all');
        $('#search_form').trigger('submit');
    }

    $( "#query_input" ).focusout(function() {
        if(!suggestionClicked){
            if(!($( "#query_input" ).val() === '') && !($("#suggestionBox > ul > li:nth-child(1) > a").size() === 0)){
                triggerSearch($("#suggestionBox > ul > li:nth-child(1) > a").html())
            }
            else{
                $( "#query_input" ).val('');
            }
            $('#suggestionBox').hide();
            $( "#suggestionList" ).empty();
        }

    })


/*]]>*/
</script>

<!--<script type="text/javascript" th:inline="javascript">-->
    <!--/*<![CDATA[*/-->
    <!--$(document).ready(function() {-->
        <!--$(".connectButton").click(function(event){-->
            <!--event.preventDefault();-->
            <!--window.open("", "connectWindow", "width=600,height=400");-->
            <!--var cTP = $(event.currentTarget).parent();-->
            <!--cTP[0].setAttribute("target", "connectWindow");-->
            <!--cTP[0].submit();-->
        <!--});-->
    <!--});-->
    <!--/*]]>*/-->
<!--</script>-->
</body>
</html>